<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

<style>
    .icon.activityicon.nofilter {
        width: 50px !important;
        height: 50px;
    }

    .activity-header {
        display: none;
    }

    .ml-wrapper {
        max-width: 830px;
        margin: 0 auto;
    }

    .ml-content {
        margin-top: 30px;
        padding: 20px 15px;
    }

    .ml-content.ml-content-assign {
        background-color: #F8F9FA;
        border-radius: 20px;
    }

    .ml-assign-description-title {
        font-size: 24px;
        font-weight: 700;
        margin-bottom: 30px;
    }

    .ml-assign-file-title {
        margin-bottom: 10px;
    }

    .ml-assign-question-title {
        font-size: 20px;
        font-weight: 500;
        margin-top: 20px;
    }

    .ml-assign-question-input {
        width: 100%;
        height: 75px;
        padding: 10px;
        font-size: 16px;
        border: 2px solid #ccc;
        border-radius: 10px;
        background-color: #fff;
        color: #333;
        resize: none;
        margin-bottom: 0;
    }

    .ml-assign-summary-input {
        width: 100%;
        height: 130px;
        padding: 10px;
        font-size: 16px;
        border: 2px solid #ccc;
        border-radius: 10px;
        background-color: #fff;
        color: #333;
        resize: none;
        margin-bottom: 10px;
    }

    .ml-input-group {
        margin-top: 10px;
    }

    .ml-input-group-summary {
        border-bottom: 1px solid #888;
        margin-bottom: 10px;
    }


    .ml-input-label {

    }

    .ml-button {
        text-decoration: none;
        color: #333;
        background-color: #CED4DA;
        padding: 8px 10px;
        border-radius: 10px;
        margin-right: 10px;
        cursor: pointer;
        transition: opacity linear 0.2s;
        outline: none;
        border: none;
    }

    .ml-button:hover {
        text-decoration: none;
        color: #333;
        opacity: 0.8;
    }

    .ml-button.ml-button--edit {
        color: #fff;
        background-color: #0F6CBF;
    }

    .ml-assign-button-group {
        display: flex;
    }

    .ml-assign-edit {
        margin-left: auto;
    }
    
</style>

<div class="ml-wrapper">
    <div class="ml-content ml-content-assign">
        <div class="ml-assign-description">
            <h2 class="ml-assign-description-title">Description</h2>
            {{ test }}
            <p class="ml-assign-file-title">Read the following file and answer the questions below:</p>
            <a class="ml-assign-file" href="{{ file_path }}" target="_blank">
                <i class='ml-assign-file-icon bx bx-file'></i>
                {{ file_name }}
            </a>
            <p class="ml-assign-question-title">Questions</p>
            <form action="" method="POST"> 
            
            {{# generated_questions }}
            <div class="ml-input-group">
                <label class="ml-input-label" for="question{{ id }}">Question {{ id }}:</label>
                <textarea class="ml-assign-question-input" onfocusin="removeLeadingTrailingSpaces(this);"
                        name="question{{ id }}" id="question{{ id }}">
                    {{ question }}
                </textarea>
            </div>

            <div class="ml-input-group-summary">
                 <label class="ml-input-label" for="summary{{ id }}">Summary:</label>
                <textarea class="ml-assign-summary-input" onfocusin="removeLeadingTrailingSpaces(this);"
                        name="summary{{ id }}" id="summary{{ id }}">
                    {{ summary }}
                </textarea>
            </div>
    
           
            {{/generated_questions }}   
            <div class="ml-assign-button-group">
                <a href="http://localhost/mod/demo/view.php?id={{ course_id }}"
                    class="ml-button ml-assign-edit">
                    Back
                </a>
                <button class="ml-button ml-button--edit" type="submit">Save changes</button>
            </div>
            </form>
        </div>

<script>
    // Xử lý border của thẻ summary cuối cùng :)) dơ vl
    const summarizes = document.querySelectorAll('.ml-input-group-summary')
    const lastSummary = summarizes[summarizes.length - 1]
    lastSummary.style.border = 'none'



    function removeLeadingTrailingSpaces(textarea) {
        textarea.value = textarea.value.trim();
    }
    // Xử lý xóa dấu cách của textarea khi trang vừa tải xong
    let textareas = document.querySelectorAll('textarea')
    textareas.forEach(textarea => {
        removeLeadingTrailingSpaces(textarea);  
    })
    

    // Change icon AI Assignment
    let img = document.querySelector('.icon.activityicon.nofilter')
    img.src = "https://thumbs.dreamstime.com/b/artificial-intelligence-ai-processor-chip-vector-icon-symbol-graphic-design-logo-web-site-social-media-mobile-app-ui-158205566.jpg"

    // Change module Name
    let moduleName = document.querySelector('.active.active_tree_node.nav-link')
    moduleName.innerText = 'AI Assignment'
</script>